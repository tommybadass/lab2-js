<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Lab 2 | COMP1073 Client-Side JavaScript</title>
    <style>
        /* General Styling */
        html {
            font-family: sans-serif;
            font-size: 200%;
            background-color: rgb(0, 0, 0);
            color: rgb(255, 255, 255);
            transition: background-color 0.3s ease-in-out;
            text-align: center;
        }

        /* Sliders */
        .slider-container {
            margin: 20px auto;
            width: 300px;
        }

        input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }

        /* RGB Display */
        #colorDisplay {
            font-size: 24px;
            font-weight: bold;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px;
            display: inline-block;
            border-radius: 10px;
        }
    </style>
</head>

<body>
    <h1>Lab 2 - RGB Background Changer</h1>
    <p>
        Adjust the sliders below to modify the
        <abbr title="Red, Green, Blue">RGB</abbr> values of the
        <code>background-color</code> CSS property.
    </p>

    <div class="slider-container">
        <label for="red">Red</label>
        <input id="red" type="range" min="0" max="255" value="0">
        <label for="green">Green</label>
        <input id="green" type="range" min="0" max="255" value="0">
        <label for="blue">Blue</label>
        <input id="blue" type="range" min="0" max="255" value="0">
    </div>

    <p id="colorDisplay">RGB(0, 0, 0)</p>

    <script>
        /* Declare and initialize global variables */
        var pageBg = document.querySelector("html");
        var sliders = document.querySelectorAll("input[type='range']");
        var colorDisplay = document.getElementById("colorDisplay");
        var rgb = [0, 0, 0];

        /* Event handlers for range sliders */
        sliders.forEach(slider => {
            slider.addEventListener("input", function () {
                var whichSlider = this.id;
                var sliderValue = this.value;
                var newRgb = changeRgb(whichSlider, sliderValue);
                var newCSS = writeCSS(newRgb);
                pageBg.style.backgroundColor = newCSS;
                colorDisplay.innerText = newCSS;
            });
        });

        /* Function to update RGB values */
        function changeRgb(channel, value) {
            switch (channel) {
                case "red":
                    rgb[0] = value;
                    break;
                case "green":
                    rgb[1] = value;
                    break;
                case "blue":
                    rgb[2] = value;
                    break;
            }
            return rgb;
        }

        /* Function to convert RGB array to CSS format */
        function writeCSS(newRgb) {
            return `rgb(${newRgb[0]}, ${newRgb[1]}, ${newRgb[2]})`;
        }
    </script>
</body>

</html>
